\Answer{}
\input{stencil}

First, we want to discretize the Laplacian operator \(\nabla^2\).
With grid spacing \(a\), the standard discretization for a square grid is
%
\begin{equation}\label{eq:del2phi}
    \nabla^2 \phi(x, y) =
    \frac{ 1 }{ a^2 } \bigl(\phi(x - a, y) - 2 \phi(x, y) + \phi(x + a, y)\bigr) +
    \frac{ 1 }{ a^2 } \bigl(\phi(x, y - a) - 2 \phi(x, y) + \phi(x, y + a)\bigr).
\end{equation}
%
We simplify Equation~\eqref{eq:del2phi} as
%
\begin{equation}
    \bigl(\nabla^2 \phi\bigr)_{i, j} = \frac{1}{a^2} \bigl(
    -4 \phi_{i, j} + \phi_{i+1, j} + \phi_{i-1, j} + \phi_{i, j-1} + \phi_{i, j+1}
    \bigr),
\end{equation}
%
where \(i\) and \(j\) label the \(x\) and \(y\) coordinates, respectively.
By starting at the lower left corner and traversing in the \(y\)-direction first, and
subsequently in the \(x\)-direction we get the following system of equations:
%
\begin{align}
    \bigl(\nabla^2 \phi\bigr)_{i, j+1}   & = \frac{1}{a^2} (
    \phi_{i, j} - 4\phi_{i, j+1} + \phi_{i, j+2} + \phi_{i+1, j+1} + \phi_{i-1, j+1}
    ),                                                       \\
    \bigl(\nabla^2 \phi\bigr)_{i+1, j}   & = \frac{1}{a^2} (
    \phi_{i, j} - 4\phi_{i+1, j} + \phi_{i+1, j+1} + \phi_{i+1, j-1} + \phi_{i+2, j}
    ),                                                       \\
    \bigl(\nabla^2 \phi\bigr)_{i+1, j+1} & = \frac{1}{a^2} (
    \phi_{i, j+1} + \phi_{i+1, j} - 4\phi_{i+1, j+1} + \phi_{i+1, j+2} + \phi_{i+2, j+1}
    ),                                                       \\
                                         & \vdots            \\
    \bigl(\nabla^2 \phi\bigr)_{i-1, j-2} & = \frac{1}{a^2} (
    \phi_{i-1, j-3} + \phi_{i, j-2} + \phi_{i-2, j-2} - 4\phi_{i-1, j-2} + \phi_{i-1, j-1}
    ),                                                       \\
    \bigl(\nabla^2 \phi\bigr)_{i-1, j-1} & = \frac{1}{a^2} (
    \phi_{i-1, j} + \phi_{i-1, j-2} + \phi_{i, j-1} + \phi_{i-2, j-1} - 4\phi_{i-1, j-1}
    ).
\end{align}
%
Here we apply the periodic boundary condition
%
\begin{align}
    \phi(x + (N-1)a, y) & = \phi(x - a, y), \\
    \phi(x, y + (N-1)a) & = \phi(x, y - a).
\end{align}

If we choose the lexicographical ordering basis,
%
\begin{equation}
    \resizebox{0.85\hsize}{!}{$ % See https://tex.stackexchange.com/a/237051
        \begin{split}
            \nabla^2 \phi &= \frac{ 1 }{ a^2 } \begin{bmatrix}
                -4     & 1      & 0      & \cdots & 0      & 1      & 1      & 0      & \cdots & 0      & 0      & \cdots & 1      & \cdots & 0      & 0      \\
                1      & -4     & 1      & \cdots & 0      & 0      & 0      & 1      & \cdots & 1      & 0      & \cdots & 0      & \cdots & 0      & 0      \\
                \vdots & \vdots & \vdots & \ddots & \vdots & \vdots & \vdots & \vdots & \ddots & \vdots & \vdots & \ddots & \vdots & \ddots & \vdots & \vdots \\
                1      & 0      & 0      & \cdots & 0      & 0      & -4     & 1      & \cdots & 1      & 1      & \cdots & 0      & \cdots & 0      & 0      \\
                0      & 1      & 0      & \cdots & 0      & 0      & 1      & -4     & \cdots & 0      & 0      & \cdots & 0      & \cdots & 0      & 0      \\
                \vdots & \vdots & \vdots & \ddots & \vdots & \vdots & \vdots & \vdots & \ddots & \vdots & \vdots & \ddots & \vdots & \ddots & \vdots & \vdots \\
                0      & 0      & 0      & \cdots & 1      & 0      & 0      & 0      & \cdots & 0      & 0      & \cdots & 0      & \cdots & -4     & 1      \\
                0      & 0      & 0      & \cdots & 0      & 1      & 0      & 0      & \cdots & 0      & 0      & \cdots & 1      & \cdots & 1      & -4
            \end{bmatrix}
            \begin{bmatrix}
                \phi_{i,j}          \\
                \phi_{i, j+1}       \\
                \phi_{i, j+2}       \\
                \vdots              \\
                \phi_{i, j+N-2}     \\
                \phi_{i, j+N-1}     \\
                \phi_{i+1, j}       \\
                \phi_{i+1, j+1}     \\
                \vdots              \\
                \phi_{i+1, j+N-1}   \\
                \phi_{i+2, j}       \\
                \vdots              \\
                \phi_{i+N-1, j}     \\
                \vdots              \\
                \phi_{i+N-1, j+N-2} \\
                \phi_{i+N-1, j+N-1}
            \end{bmatrix} \\
            &= \frac{ 1 }{ a^2 } \begin{bmatrix}
                -4     & 1      & 0      & \cdots & 0      & 1      & 1      & 0      & \cdots & 0      & 0      & \cdots & 1      & \cdots & 0      & 0      \\
                1      & -4     & 1      & \cdots & 0      & 0      & 0      & 1      & \cdots & 1      & 0      & \cdots & 0      & \cdots & 0      & 0      \\
                \vdots & \vdots & \vdots & \ddots & \vdots & \vdots & \vdots & \vdots & \ddots & \vdots & \vdots & \ddots & \vdots & \ddots & \vdots & \vdots \\
                1      & 0      & 0      & \cdots & 0      & 0      & -4     & 1      & \cdots & 1      & 1      & \cdots & 0      & \cdots & 0      & 0      \\
                0      & 1      & 0      & \cdots & 0      & 0      & 1      & -4     & \cdots & 0      & 0      & \cdots & 0      & \cdots & 0      & 0      \\
                \vdots & \vdots & \vdots & \ddots & \vdots & \vdots & \vdots & \vdots & \ddots & \vdots & \vdots & \ddots & \vdots & \ddots & \vdots & \vdots \\
                0      & 0      & 0      & \cdots & 1      & 0      & 0      & 0      & \cdots & 0      & 0      & \cdots & 0      & \cdots & -4     & 1      \\
                0      & 0      & 0      & \cdots & 0      & 1      & 0      & 0      & \cdots & 0      & 0      & \cdots & 1      & \cdots & 1      & -4
            \end{bmatrix}
            \begin{bmatrix}
                \phi_{i,j}      \\
                \phi_{i, j+1}   \\
                \phi_{i, j+2}   \\
                \vdots          \\
                \phi_{i, j-2}   \\
                \phi_{i, j-1}   \\
                \phi_{i+1, j}   \\
                \phi_{i+1, j+1} \\
                \vdots          \\
                \phi_{i+1, j-1} \\
                \phi_{i+2, j}   \\
                \vdots          \\
                \phi_{i-1, j}   \\
                \vdots          \\
                \phi_{i-1, j-2} \\
                \phi_{i-1, j-1}
            \end{bmatrix} \\
            &= \mathrm{ A } \bm{x},
        \end{split}
    $}
\end{equation}
%
where \(\mathrm{ A }\) is a \(N^2 \times N^2\) matrix,
and \(\bm{x}\) is a \(N^2 \times 1\) vector.
Notice that the structure of the coefficient matrix \(\mathrm{ A }\) is completely dictated
by the way that the basis is ordered.
The non-zero elements in the coefficient matrix are markers for which \(\phi\) is coupled
with each other.
In \(\bm{x}\), we order the \(\phi\)'s in \(y\)-direction first and then \(x\)-direction,
as stated above.

Obviously, the discrete Laplacian is a sparse matrix.
We could use sparse matrix algorithms or just use~\eqref{eq:del2phi} in the actual
implementation.

